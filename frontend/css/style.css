/* ==========================================================================
   PART 1: çš®è‚¤é…ç½®åŒº (Theme Configuration)
   è¯´æ˜ï¼šä»…åœ¨æ­¤å¤„ä¿®æ”¹é¢œè‰²/å°ºå¯¸ï¼Œä¸‹æ–¹é€»è¾‘ä¼šè‡ªåŠ¨åº”ç”¨ã€‚
   ========================================================================== */

/* --- 1. é»˜è®¤é£æ ¼ (Default / Modern) --- */
:root,
body:not([data-bubble-style]),
body[data-bubble-style="default"] {
    /* ğŸ“ å°ºå¯¸æ„é€  */
    --bubble-height: 24px;
    --bubble-radius: 12px;
    --bubble-padding: 0 10px;
    --bubble-margin: 0 0 0 4px;
    --bubble-gap: 6px;
    --bubble-font-size: 12px;
    --bubble-font-weight: normal;
    --bubble-font-family: inherit;
    --bubble-backdrop: blur(2px);

    /* åŸºç¡€é˜´å½± */
    --bubble-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);

    /* ğŸ¨ çŠ¶æ€: Waiting (é™æ­¢) */
    --s-wait-bg: #e0e0e0;
    --s-wait-color: #616161;
    --s-wait-border: 1px solid #bdbdbd;

    /* ğŸ¨ çŠ¶æ€: Loading (åŠ è½½) */
    --s-load-bg: #fff8e1;
    --s-load-color: inherit;
    --s-load-border: 1px solid #ffe0b2;

    /* ğŸ¨ çŠ¶æ€: Ready (å°±ç»ª) */
    --s-ready-bg: #dcedc8;
    --s-ready-color: #33691e;
    --s-ready-border: 1px solid #aed581;
    --s-ready-shadow: none;
    /* é»˜è®¤æ— ç‰¹æ®Šé˜´å½± */

    /* ğŸ¨ çŠ¶æ€: Playing (æ’­æ”¾) */
    /* ä¿®æ”¹ï¼šèƒŒæ™¯ç”±ææ·¡ç»¿åŠ æ·±ä¸ºæ¸…æ–°çš„æµ…ç»¿ï¼Œè¾¹æ¡†åŒæ­¥åŠ æ·±ï¼Œå¢å¼ºå¯¹æ¯”åº¦ */
    --s-play-bg: linear-gradient(180deg, #dcedc8 0%, #c5e1a5 100%);
    --s-play-color: #1b5e20;
    --s-play-border: 1px solid #7cb342;
    --s-play-shadow: 0 2px 8px rgba(51, 105, 30, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.6);
    --s-play-font-weight: 600;
    --s-play-scale: scale(1.01);
    /* ä¸¥æ ¼è¿˜åŸï¼šåŸä»£ç æ˜¯ 1.01 */

    /* ğŸŒŠ å¾‹åŠ¨æ¡é¢œè‰² */
    --wave-bar-color: #333;
    --wave-bar-playing: #1b5e20;
}

/* --- 2. ç»å…¸æ€€æ—§ (Classic) --- */
body[data-bubble-style="classic"] {
    --bubble-height: 22px;
    --bubble-radius: 4px;
    /* æ–¹è§’ */
    --bubble-padding: 0 6px;
    --bubble-margin: 0 2px;
    --bubble-backdrop: none;
    --bubble-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);

    /* Waiting */
    --s-wait-bg: #c6e2b8;
    --s-wait-color: #333;
    /* åŸä»£ç æœªæŒ‡å®šï¼Œç»§æ‰¿bodyï¼Œè¿™é‡Œç»™ä¸ªæ·±è‰²é˜²çœ‹ä¸è§ */
    --s-wait-border: 1px solid transparent;

    /* Ready & Playing (ä¸¥æ ¼è¿˜åŸï¼šåŸä»£ç Classicæ²¡æœ‰å®šä¹‰æ’­æ”¾å˜è‰²ï¼Œæ‰€ä»¥å¼ºåˆ¶ç­‰äºWaitingé¢œè‰²) */
    --s-ready-bg: #c6e2b8;
    --s-ready-border: 1px solid transparent;

    --s-play-bg: #c6e2b8;
    --s-play-color: #333;
    --s-play-border: 1px solid transparent;
    --s-play-shadow: inset 1px 1px 0 rgba(255, 255, 255, 0.3);
    /* ä¿æŒå¾®ç«‹ä½“æ„Ÿ */
    --s-play-scale: none;
    /* ç»å…¸æ¬¾ä¸æ”¾å¤§ */

    /* å¾‹åŠ¨æ¡ */
    --wave-bar-color: #333;
    --wave-bar-playing: #333;
    /* ç»å…¸æ¬¾å¾‹åŠ¨æ¡ä¸å˜è‰² */
}

/* --- 3. è½»æ°§Â·å¾®ç å® (Kawaii) --- */
body[data-bubble-style="kawaii"] {
    --bubble-height: 22px;
    --bubble-radius: 11px;
    --bubble-padding: 0 8px;
    --bubble-margin: 0 2px;
    --bubble-font-family: "Segoe UI", sans-serif;
    --bubble-backdrop: blur(4px);

    /* Waiting: æœˆå…‰é“¶ */
    --s-wait-bg: linear-gradient(180deg, #fbfbfb 0%, #e8eaed 100%);
    --s-wait-color: #8890a0;
    --s-wait-border: 1px solid #e0e4e8;

    /* Loading: æµæ²™é‡‘ */
    --s-load-bg: #fffdf0;
    --s-load-color: #fbc02d;
    --s-load-border: 1px solid #ffe082;

    /* Ready: è–„è·é’ */
    --s-ready-bg: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
    --s-ready-color: #006064;
    --s-ready-border: 1px solid #80deea;
    /* ä¸¥æ ¼è¿˜åŸï¼šåŸä»£ç  Ready çŠ¶æ€æœ‰ç‰¹æ®Šé’è‰²é˜´å½± */
    --s-ready-shadow: 0 1px 3px rgba(0, 150, 136, 0.15);

    /* Playing: å¹»å½©ç´« */
    --s-play-bg: linear-gradient(90deg, #b39ddb 0%, #f48fb1 100%);
    --s-play-color: #fff;
    --s-play-border: 1px solid rgba(255, 255, 255, 0.4);
    --s-play-shadow: 0 2px 6px rgba(179, 157, 219, 0.4);
    --s-play-scale: none;
    /* åŸä»£ç  Kawaii æ²¡æœ‰ scale æ”¾å¤§ */

    --wave-bar-playing: rgba(255, 255, 255, 0.95);
}

/* --- 4. èŠ±ä¿¡Â·åˆç»½ (Bloom) --- */
body[data-bubble-style="bloom"] {
    --bubble-height: 24px;
    --bubble-radius: 12px;
    --bubble-font-family: "Nunito", sans-serif;
    --bubble-shadow: 0 1px 2px rgba(255, 182, 193, 0.15);

    /* Waiting: ä»™æ°”åŠé€ */
    --s-wait-bg: rgba(255, 255, 255, 0.6);
    --s-wait-color: #886a77;
    --s-wait-border: 1px solid rgba(255, 228, 235, 0.8);

    /* Ready: ç”œæ¡ƒç²‰ */
    --s-ready-bg: #ffebee;
    --s-ready-color: #d81b60;
    --s-ready-border: 1px solid #f48fb1;
    --s-ready-shadow: 0 2px 5px rgba(233, 30, 99, 0.1);

    /* Playing: æ¸å˜æ¨±èŠ± */
    /* ä¸¥æ ¼è¿˜åŸï¼šåŸä»£ç åŒ…å« 99% çš„èŠ‚ç‚¹ */
    --s-play-bg: linear-gradient(120deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
    --s-play-color: #fff;
    --s-play-border: 1px solid rgba(255, 255, 255, 0.4);
    --s-play-shadow: 0 4px 10px rgba(255, 154, 158, 0.35);
    --s-play-scale: none;

    --wave-bar-playing: rgba(255, 255, 255, 0.9);
}

/* --- 5. é»‘æ›œçŸ³ Â· æå¤œ (Obsidian) --- */
body[data-bubble-style="obsidian"] {
    --bubble-height: 24px;
    --bubble-radius: 6px;
    /* è¾ƒå°çš„åœ†è§’ï¼Œæ˜¾å¾—å¹²ç»ƒç¡¬æœ— */
    --bubble-padding: 0 10px;
    --bubble-margin: 0 3px;
    --bubble-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    --bubble-backdrop: blur(10px) saturate(180%);
    /* å¼ºç£¨ç ‚ç»ç’ƒæ„Ÿ */

    /* Waiting: ç£¨ç ‚æ·±ç° */
    --s-wait-bg: rgba(30, 30, 35, 0.7);
    --s-wait-color: #a0a0a0;
    --s-wait-border: 1px solid rgba(255, 255, 255, 0.08);
    --s-wait-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

    /* Loading: é“‚é‡‘æµå…‰ */
    --s-load-bg: #2b2b2b;
    --s-load-color: #e0e0e0;
    --s-load-border: 1px solid #555;

    /* Ready: ç¥–æ¯ç»¿ (æ·±é‚ƒæš—è°ƒ) */
    --s-ready-bg: linear-gradient(145deg, #0f2e20 0%, #051b11 100%);
    --s-ready-color: #4ade80;
    /* è§å…‰ç»¿æ–‡å­—ï¼Œå½¢æˆåå·® */
    --s-ready-border: 1px solid #166534;
    --s-ready-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);

    /* Playing: æå¤œé»‘é‡‘ */
    /* æ ¸å¿ƒï¼šä½¿ç”¨å¾ˆæ·±çš„æ¸å˜ + é¡¶éƒ¨é«˜å…‰(inset shadow)æ¨¡æ‹Ÿå®çŸ³åˆ‡é¢ */
    --s-play-bg: linear-gradient(180deg, #3a3a3a 0%, #111111 100%);
    --s-play-color: #fff;
    --s-play-border: 1px solid rgba(255, 255, 255, 0.15);
    --s-play-shadow:
        0 4px 12px rgba(0, 0, 0, 0.5),
        /* å¤–éƒ¨æŠ•å½± */
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    /* é¡¶éƒ¨é«˜å…‰æ£±é•œæ•ˆæœ */
    --s-play-scale: scale(1.02);
    --s-play-font-weight: 500;

    /* å¾‹åŠ¨æ¡ï¼šçº¯é“¶è‰² */
    --wave-bar-color: #666;
    --wave-bar-playing: #e0e0e0;
}

/* --- 6. èµ›åšæœ‹å…‹ Â· éœ“è™¹ (Cyberpunk) --- */

body[data-bubble-style="cyberpunk"] {
    --bubble-height: 24px;
    --bubble-radius: 2px;
    /* æç®€åˆ‡è§’ï¼Œå‡ ä¹ä¸ºç›´è§’ */
    --bubble-padding: 0 12px;
    --bubble-margin: 0 4px;
    --bubble-font-family: "Courier New", "Consolas", monospace;
    /* ç­‰å®½ä»£ç å­—ä½“ */
    --bubble-backdrop: blur(4px);

    /* Waiting: çŸ©é˜µç° */
    --s-wait-bg: rgba(10, 10, 16, 0.85);
    --s-wait-color: #555;
    --s-wait-border: 1px solid #333;
    --s-wait-shadow: none;

    /* Loading: è­¦å‘Šé»„ (æ•…éšœé£) */
    --s-load-bg: #1a1a00;
    --s-load-color: #ffeb3b;
    --s-load-border: 1px solid #ffeb3b;

    /* Ready: ä¿¡å·é’ */
    --s-ready-bg: #001a1a;
    --s-ready-color: #00ffff;
    --s-ready-border: 1px solid #00aaaa;
    --s-ready-shadow: 0 0 5px rgba(0, 255, 255, 0.2);

    /* Playing: éœ“è™¹å¹»å¤œ (è“ç´«æ¸å˜ + å¼ºçƒˆè¾‰å…‰) */
    --s-play-bg: linear-gradient(90deg, #240b36 0%, #c31432 100%);
    /* ç»å…¸çš„ Midnight City é…è‰² */
    /* æˆ–è€…ç”¨æ›´çº¯ç²¹çš„é»‘è‰²åº• + éœ“è™¹è¾¹æ¡†ï¼Œè¿™é‡Œé€‰æ‹©æ¸å˜ä»¥ä½“ç°"è´µæ°”" */
    --s-play-bg: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
    --s-play-color: #00ffff;
    /* èµ›åšé’æ–‡å­— */
    --s-play-border: 1px solid rgba(0, 255, 255, 0.5);
    /* é’è‰²è¾¹æ¡† */

    /* æ ¸å¿ƒï¼šåŒé‡å‘å…‰ (Box Shadow Glow) */
    --s-play-shadow:
        0 0 10px rgba(0, 255, 255, 0.3),
        /* é’è‰²å…‰æ™• */
        inset 0 0 20px rgba(123, 31, 162, 0.2);
    /* å†…éƒ¨ç´«è‰²æ°›å›´ */

    --s-play-scale: scale(1.03);
    --s-play-font-weight: 700;

    /* å¾‹åŠ¨æ¡ï¼šç”µå…‰é’ */
    --wave-bar-color: #333;
    --wave-bar-playing: #00ffff;
}

/* --- 7. æ°´å¢¨ Â· çƒŸé›¨ (Ink & Mist) --- */
/* è®¾è®¡ç†å¿µï¼šä»™ä¾ é£˜æ¸ºã€å¤é£å†™æ„ã€‚
   ä½¿ç”¨æ¥·ä½“/å®‹ä½“ï¼Œæ¨¡æ‹Ÿå®£çº¸çš„é€æ°”æ„Ÿä¸å¢¨æ±æ™•æŸ“çš„å±‚çº§ã€‚
   é…è‰²çµæ„Ÿï¼šé’èŠ±ã€æ°´å¢¨ã€ä¸¹ç ‚ã€‚
*/
body[data-bubble-style="ink"] {
    --bubble-height: 26px;
    /* ç•¥é«˜ï¼Œç•™å‡ºå‘¼å¸æ„Ÿ */
    --bubble-radius: 14px;
    /* æŸ”å’Œåœ†æ¶¦ */
    --bubble-padding: 0 12px;
    --bubble-margin: 0 4px;
    /* æ ¸å¿ƒï¼šä¼˜å…ˆä½¿ç”¨æ¥·ä½“æˆ–å®‹ä½“ï¼Œè¥é€ å¤éŸµ */
    --bubble-font-family: "Kaiti", "STKaiti", "KaiTi", "SimKai", "Songti SC", "Noto Serif SC", serif;
    --bubble-backdrop: blur(6px);
    /* çƒŸé›¨æœ¦èƒ§æ„Ÿ */

    /* Waiting: å®£çº¸ç™½ */
    --s-wait-bg: rgba(245, 245, 245, 0.85);
    --s-wait-color: #595959;
    /* æ·¡å¢¨è‰² */
    --s-wait-border: 1px solid rgba(0, 0, 0, 0.1);
    --s-wait-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);

    /* Loading: ä¸¹ç ‚çº¢ (ç‚¹ç›ä¹‹ç¬”) */
    --s-load-bg: #fffbfb;
    --s-load-color: #c0392b;
    /* æœ±ç ‚è‰² */
    --s-load-border: 1px solid #e6b0aa;

    /* Ready: å¤©é’è‰² (é›¨è¿‡å¤©é’äº‘ç ´å¤„) */
    --s-ready-bg: rgba(224, 247, 250, 0.9);
    --s-ready-color: #455a64;
    --s-ready-border: 1px solid #b2ebf2;
    --s-ready-shadow: 0 2px 6px rgba(69, 90, 100, 0.1);

    /* Playing: å¢¨éŸµæµæ·Œ */
    /* æ¸å˜æ¨¡æ‹Ÿå¢¨æ±åœ¨æ°´ä¸­åŒ–å¼€çš„æ·±æµ…å˜åŒ– */
    --s-play-bg: linear-gradient(110deg, #2c3e50 0%, #4ca1af 100%);
    /* æˆ–è€…çº¯æ­£æ°´å¢¨é£ï¼šlinear-gradient(180deg, #000000 0%, #434343 100%); */

    --s-play-color: #fff;
    --s-play-border: 1px solid rgba(255, 255, 255, 0.2);
    /* é˜´å½±å¸¦æœ‰é’è‰²è¾‰å…‰ï¼Œä½“ç°"ä»™æ°”" */
    --s-play-shadow: 0 4px 15px rgba(76, 161, 175, 0.35);

    --s-play-scale: scale(1.02);
    --s-play-font-weight: 600;

    /* å¾‹åŠ¨æ¡ï¼šå¦‚çƒŸä¼¼é›¾çš„ç™½è‰² */
    --wave-bar-color: #999;
    --wave-bar-playing: rgba(255, 255, 255, 0.9);
}

/* --- 8. ç¾Šçš®å· Â· å²è¯— (Royal Scroll) --- */
/* é€‚ç”¨åœºæ™¯ï¼šè¥¿å¹»ã€D&Dã€ä¸­ä¸–çºªè´µæ—ã€é­”æ³•å­¦é™¢
   è®¾è®¡ç†å¿µï¼šæ³›é»„çš„ç¾Šçš®çº¸çº¹ç†ï¼Œè¡¬æ‰˜æ·±è¤è‰²çš„å¤æ–‡ï¼Œè¾¹ç¼˜ä½¿ç”¨åŒçº¿æ¡†æ¨¡æ‹Ÿåœ°å›¾è¾¹ç•Œã€‚
*/
body[data-bubble-style="scroll"] {
    --bubble-height: 24px;
    --bubble-radius: 4px;
    /* ç•¥å¸¦åœ†è§’çš„æ–¹æ¡† */
    --bubble-padding: 0 10px;
    --bubble-margin: 0 4px;
    /* è¡¬çº¿ä½“ï¼Œå¸¦æ¥å†å²åšé‡æ„Ÿ */
    --bubble-font-family: "Georgia", "Times New Roman", "Songti SC", serif;
    --bubble-backdrop: none;

    /* Waiting: æœªå±•å¼€çš„å·è½´è‰² */
    --s-wait-bg: #eaddcf;
    --s-wait-color: #5d4037;
    --s-wait-border: 1px solid #d7ccc8;
    --s-wait-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);

    /* Loading: çƒ›ç«é»„ */
    --s-load-bg: #fff8e1;
    --s-load-color: #f57f17;
    --s-load-border: 1px solid #ffca28;

    /* Ready: å¢¨æ°´è“ (ç¾½æ¯›ç¬”ä¹¦å†™è‰²) */
    --s-ready-bg: #f5f5dc;
    /* ç±³è‰² */
    --s-ready-color: #1a237e;
    /* çš‡å®¶è“æ–‡å­— */
    --s-ready-border: 1px solid #9fa8da;
    --s-ready-shadow: inset 0 0 10px rgba(161, 136, 127, 0.2);
    /* çº¸å¼ é™ˆæ—§æ„Ÿ */

    /* Playing: è£è€€é‡‘ (ç«æ¼†ä¸é­”æ³•) */
    --s-play-bg: linear-gradient(180deg, #fff3e0 0%, #ffe0b2 100%);
    --s-play-color: #3e2723;
    /* æ·±è¤æ–‡å­— */
    /* æ ¸å¿ƒï¼šåŒçº¿è¾¹æ¡†ï¼Œæ¨¡æ‹Ÿå¤åœ°å›¾è¾¹æ¡† */
    --s-play-border: 3px double #8d6e63;
    --s-play-shadow: 0 4px 8px rgba(62, 39, 35, 0.2);
    --s-play-scale: scale(1.02);
    --s-play-font-weight: 600;

    /* å¾‹åŠ¨æ¡ï¼šæ·±è¤å¢¨æ°´è‰² */
    --wave-bar-color: #8d6e63;
    --wave-bar-playing: #3e2723;
}

/* --- 9. è’¸æ±½ Â· æœºæ¢° (Steampunk) --- */
/* é€‚ç”¨åœºæ™¯ï¼šç»´å¤šåˆ©äºšã€å·¥ä¸šé©å‘½ã€é£è‰‡ã€æœºæ¢°å¸ˆ
   è®¾è®¡ç†å¿µï¼šé»„é“œã€ç´«é“œã€é½¿è½®ã€‚å¼ºè°ƒé‡‘å±å…‰æ³½å’Œç¡¬æœ—çš„çº¿æ¡ã€‚
*/
body[data-bubble-style="steampunk"] {
    --bubble-height: 24px;
    --bubble-radius: 8px;
    --bubble-padding: 0 12px;
    --bubble-margin: 0 4px;
    --bubble-font-family: "Courier New", "Rockwell", serif;
    /* æ‰“å­—æœºé£æ ¼ */
    --bubble-backdrop: blur(2px);

    /* Waiting: é”ˆèš€é“œ */
    --s-wait-bg: #d7ccc8;
    --s-wait-color: #4e342e;
    --s-wait-border: 1px solid #a1887f;

    /* Loading: è’¸æ±½ç™½ */
    --s-load-bg: #eceff1;
    --s-load-color: #607d8b;
    --s-load-border: 1px dashed #78909c;
    /* è™šçº¿æ¨¡æ‹Ÿé“†æ¥ */

    /* Ready: æŠ›å…‰é“œ */
    --s-ready-bg: linear-gradient(145deg, #d7ccc8 0%, #efebe9 100%);
    --s-ready-color: #5d4037;
    --s-ready-border: 1px solid #8d6e63;
    --s-ready-shadow: inset 1px 1px 0 rgba(255, 255, 255, 0.5);

    /* Playing: ç†”ç‚‰ä¹‹å¿ƒ (é»„é“œé‡‘æ¸å˜) */
    --s-play-bg: linear-gradient(180deg, #fff9c4 0%, #fbc02d 100%);
    --s-play-color: #37474f;
    /* é“ç°è‰²æ–‡å­— */
    --s-play-border: 1px solid #f57f17;
    /* é‡‘å±æµ®é›•æ„Ÿé˜´å½± */
    --s-play-shadow:
        0 2px 5px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.8),
        inset 0 -1px 0 rgba(166, 109, 5, 0.5);
    --s-play-scale: scale(1.02);
    --s-play-font-weight: 700;

    /* å¾‹åŠ¨æ¡ï¼šç‚‰ç«çº¢ */
    --wave-bar-color: #5d4037;
    --wave-bar-playing: #bf360c;
}

/* --- 10. é­…å½± Â· å¾®é†º (Velvet Rouge) --- */
/* é€‚ç”¨åœºæ™¯ï¼šæ·±å¤œæƒ…æ„Ÿã€å¸è¡€é¬¼ã€æˆå¹´äººçš„æ‹çˆ±ã€è¯±æƒ‘ã€è±ªé—¨
   è®¾è®¡ç†å¿µï¼šçº¢é…’ã€å¤©é¹…ç»’ã€ç«ç‘°ã€‚å¼ºè°ƒâ€œå±é™©çš„è¿·äººæ„Ÿâ€ã€‚
   æš—çº¢åº•è‰²é…åˆé‡‘è‰²å…‰æ³½ï¼Œè¥é€ ä½è°ƒå¥¢åçš„æš§æ˜§æ°›å›´ã€‚
*/
body[data-bubble-style="rouge"] {
    --bubble-height: 24px;
    --bubble-radius: 8px;
    /* é€‚ä¸­çš„å¼§åº¦ */
    --bubble-padding: 0 12px;
    --bubble-margin: 0 4px;
    --bubble-font-family: "Georgia", serif;
    /* ä¼˜é›…è¡¬çº¿ä½“ */
    --bubble-backdrop: blur(5px);

    /* Waiting: ä¸ç»¸ç° */
    --s-wait-bg: #2d2d2d;
    --s-wait-color: #9e9e9e;
    --s-wait-border: 1px solid #444;

    /* Loading: ç«ç‘°é‡‘ */
    --s-load-bg: #2a1a1a;
    --s-load-color: #e57373;
    --s-load-border: 1px solid #d32f2f;

    /* Ready: å‹ƒè‰®ç¬¬çº¢ (æ·±é‚ƒ) */
    --s-ready-bg: linear-gradient(135deg, #4a0000 0%, #210000 100%);
    --s-ready-color: #ffcdd2;
    /* æµ…ç²‰çº¢å­— */
    --s-ready-border: 1px solid #880e4f;
    --s-ready-shadow: 0 2px 4px rgba(66, 0, 0, 0.5);

    /* Playing: é†‰äººé…’çº¢ (Velvet Texture) */
    --s-play-bg: linear-gradient(135deg, #880e4f 0%, #b71c1c 100%);
    --s-play-color: #fff;
    --s-play-border: 1px solid rgba(255, 215, 0, 0.4);
    /* æ·¡é‡‘è¾¹æ¡†ï¼Œæå‡è´µæ°” */
    /* æ ¸å¿ƒï¼šæŸ”å…‰æ™•æŸ“ï¼Œæ¨¡æ‹Ÿç¯çº¢é…’ç»¿ä¸‹çš„æš§æ˜§ */
    --s-play-shadow:
        0 4px 12px rgba(136, 14, 79, 0.4),
        inset 0 0 10px rgba(255, 0, 0, 0.1);

    --s-play-scale: scale(1.02);
    --s-play-font-weight: 500;

    /* å¾‹åŠ¨æ¡ï¼šé¦™æ§Ÿé‡‘ */
    --wave-bar-color: #555;
    --wave-bar-playing: #ffe082;
}

/* --- 11. æˆ˜æœ¯ Â· æŒ‡ä»¤ (Tactical Command) --- */
/* é€‚ç”¨åœºæ™¯ï¼šç°ä»£æˆ˜äº‰ã€ç‰¹å·¥è¡ŒåŠ¨ã€å±æœºæ—¶åˆ»ã€åºŸåœŸç”Ÿå­˜
   è®¾è®¡ç†å¿µï¼šå†›ç”¨HUDã€é›·è¾¾ç»¿ã€é«˜å¯¹æ¯”åº¦ã€ç¡¬æœ—çº¿æ¡ã€‚
   å»é™¤äº†æ‰€æœ‰æŸ”å’Œçš„è£…é¥°ï¼Œåªä¿ç•™â€œé«˜æ•ˆâ€å’Œâ€œå†·é…·â€ã€‚
*/
body[data-bubble-style="tactical"] {
    --bubble-height: 22px;
    /* ç´§å‡‘ï¼Œæ›´åƒçŠ¶æ€æ  */
    --bubble-radius: 0px;
    /* çº¯ç›´è§’ï¼Œå†›ç”¨é£æ ¼ */
    --bubble-padding: 0 8px;
    --bubble-margin: 0 5px;
    --bubble-font-family: "Consolas", "Roboto Mono", monospace;
    /* ç­‰å®½å­—ä½“ */
    --bubble-backdrop: none;

    /* Waiting: è¿·å½©ç° */
    --s-wait-bg: #263238;
    --s-wait-color: #607d8b;
    --s-wait-border: 1px solid #37474f;

    /* Loading: è­¦æˆ’æ©™ */
    --s-load-bg: #212121;
    --s-load-color: #ff9800;
    --s-load-border: 1px solid #ff9800;

    /* Ready: å¾…å‘½ç»¿ */
    --s-ready-bg: #1b5e20;
    --s-ready-color: #a5d6a7;
    --s-ready-border: 1px solid #2e7d32;
    --s-ready-shadow: none;

    /* Playing: é”å®šç›®æ ‡ (é«˜äº®ç»¿) */
    --s-play-bg: #000;
    /* çº¯é»‘åº• */
    --s-play-color: #00e676;
    /* è§å…‰æ¯’æ¶²ç»¿ */
    --s-play-border: 1px solid #00e676;
    /* æ‰«æçº¿é£æ ¼é˜´å½± */
    --s-play-shadow: 0 0 4px rgba(0, 230, 118, 0.5);

    --s-play-scale: none;
    /* æˆ˜æœ¯é£æ ¼ä¸æ”¾å¤§ */
    --s-play-font-weight: 700;

    /* å¾‹åŠ¨æ¡ï¼šé›·è¾¾æ³¢ */
    --wave-bar-color: #37474f;
    --wave-bar-playing: #00e676;
}

/* --- 12. æ˜Ÿèˆ° Â· å…‰ç¯ (Starship Halo) --- */
/* é€‚ç”¨åœºæ™¯ï¼šå¤ªç©ºæ­Œå‰§ã€é«˜åº¦å‘è¾¾çš„æœªæ¥ã€AI ä¼´ä¾£
   è®¾è®¡ç†å¿µï¼šåŒºåˆ«äºèµ›åšæœ‹å…‹çš„â€œè„ä¹±éœ“è™¹â€ï¼Œè¿™æ˜¯â€œæ´å‡€æœªæ¥â€ã€‚
   é€šé€çš„ç»ç’ƒã€å…¨æ¯æŠ•å½±ã€çº¯ç™½ä¸å†°è“ã€‚ç±»ä¼¼ Star Trek æˆ– è‹¹æœé£æœªæ¥æ„Ÿã€‚
*/
body[data-bubble-style="holo"] {
    --bubble-height: 24px;
    --bubble-radius: 12px;
    --bubble-padding: 0 10px;
    --bubble-margin: 0 4px;
    --bubble-font-family: "Segoe UI", "Roboto", sans-serif;
    --bubble-backdrop: blur(8px);
    /* ç£¨ç ‚ç»ç’ƒ */

    /* Waiting: å¹½çµç™½ */
    --s-wait-bg: rgba(255, 255, 255, 0.1);
    --s-wait-color: #b0bec5;
    --s-wait-border: 1px solid rgba(255, 255, 255, 0.1);

    /* Loading: é‡å­æ€ */
    --s-load-bg: rgba(3, 169, 244, 0.1);
    --s-load-color: #03a9f4;
    --s-load-border: 1px solid rgba(3, 169, 244, 0.3);

    /* Ready: æŠ¤ç›¾å……èƒ½ */
    --s-ready-bg: rgba(225, 245, 254, 0.8);
    --s-ready-color: #0277bd;
    --s-ready-border: 1px solid #81d4fa;
    --s-ready-shadow: 0 0 10px rgba(129, 212, 250, 0.3);

    /* Playing: æ ¸å¿ƒé©±åŠ¨ (å†°è“å…‰è¾‰) */
    --s-play-bg: rgba(255, 255, 255, 0.95);
    --s-play-color: #01579b;
    --s-play-border: 1px solid #fff;
    /* æ ¸å¿ƒï¼šæå…¶çº¯å‡€çš„è“è‰²è¾‰å…‰ */
    --s-play-shadow:
        0 0 15px rgba(3, 169, 244, 0.6),
        0 0 30px rgba(3, 169, 244, 0.2);

    --s-play-scale: scale(1.02);
    --s-play-font-weight: 600;

    /* å¾‹åŠ¨æ¡ï¼šæ¿€å…‰è“ */
    --wave-bar-color: #b0bec5;
    --wave-bar-playing: #039be5;
}

/* ==========================================================================
   PART 2: æ ¸å¿ƒç»„ä»¶é€»è¾‘ (Core Logic)
   ========================================================================== */

/* --- ä¸»æ°”æ³¡å®¹å™¨ --- */
.voice-bubble {
    display: inline-flex;
    align-items: center;
    justify-content: space-between;
    vertical-align: middle;
    box-sizing: border-box;

    /* åº”ç”¨å˜é‡ */
    height: var(--bubble-height);
    padding: var(--bubble-padding);
    margin: var(--bubble-margin);
    border-radius: var(--bubble-radius);
    gap: var(--bubble-gap);

    font-size: var(--bubble-font-size);
    font-weight: var(--bubble-font-weight);
    font-family: var(--bubble-font-family);

    backdrop-filter: var(--bubble-backdrop);
    box-shadow: var(--bubble-shadow);

    /* é»˜è®¤é¢œè‰² (Waiting) */
    background: var(--s-wait-bg);
    color: var(--s-wait-color);
    border: var(--s-wait-border);

    min-width: 40px;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* äº¤äº’ï¼šé¼ æ ‡æ‚¬åœ */
.voice-bubble:hover {
    filter: brightness(0.97);
    transform: translateY(-1px);
}

/* çŠ¶æ€ï¼šLoading (é€šç”¨åŠ è½½) */
.voice-bubble.loading {
    background: var(--s-load-bg) !important;
    color: var(--s-load-color) !important;
    border: var(--s-load-border) !important;
    /* ç»Ÿä¸€ä½¿ç”¨ Pulse åŠ¨ç”»ï¼Œè¿™æ¯”åŸç‰ˆ Classic çš„ grayscale æ›´ç¬¦åˆé€»è¾‘ï¼Œä¸”é¢œè‰²å·²é€šè¿‡å˜é‡æ§åˆ¶ */
    animation: tts-pulse 1.5s infinite;
}

/* Kawaii ä¸“å±åŠ è½½åŠ¨ç”» (ä¿ç•™) */
body[data-bubble-style="kawaii"] .voice-bubble.loading {
    animation: tts-shimmer 1.5s infinite alternate;
}

/* çŠ¶æ€ï¼šReady (å°±ç»ª) */
.voice-bubble[data-status="ready"] {
    background: var(--s-ready-bg) !important;
    color: var(--s-ready-color) !important;
    border: var(--s-ready-border) !important;
    box-shadow: var(--s-ready-shadow, var(--bubble-shadow)) !important;
}

/* çŠ¶æ€ï¼šPlaying (æ’­æ”¾ä¸­) */
.voice-bubble.playing {
    background: var(--s-play-bg) !important;
    color: var(--s-play-color) !important;
    border: var(--s-play-border) !important;
    box-shadow: var(--s-play-shadow) !important;
    font-weight: var(--s-play-font-weight, 600);
    transform: var(--s-play-scale, scale(1));
    /* å˜é‡æ§åˆ¶æ˜¯å¦æ”¾å¤§ */
}

/* çŠ¶æ€ï¼šError (é€šç”¨é”™è¯¯çº¢ - æœªæ”¹åŠ¨) */
.voice-bubble.error {
    background: #ffebee !important;
    border: 1px solid #ef9a9a !important;
    color: #c62828 !important;
    box-shadow: none !important;
    cursor: not-allowed;
}

/* --- å¾‹åŠ¨æ¡åŠ¨ç”» (Wave Animation) --- */
.sovits-voice-waves {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 2px;
    width: 14px;
    height: 70%;
    flex-shrink: 0;
}

.sovits-voice-bar {
    width: 3px;
    border-radius: 2px;
    height: 7px;
    background: var(--wave-bar-color);
    transition: background 0.3s, height 0.2s;
    opacity: 0.7;
}

/* æ’­æ”¾æ—¶çš„å¾‹åŠ¨ */
.voice-bubble.playing .sovits-voice-bar {
    background: var(--wave-bar-playing);
    animation: sovits-wave-anim 1s infinite ease-in-out;
}

.voice-bubble.playing .sovits-voice-bar:nth-child(1) {
    animation-delay: 0.0s;
}

.voice-bubble.playing .sovits-voice-bar:nth-child(2) {
    animation-delay: 0.15s;
}

.voice-bubble.playing .sovits-voice-bar:nth-child(3) {
    animation-delay: 0.3s;
}

/* å…³é”®å¸§ */
@keyframes sovits-wave-anim {

    0%,
    100% {
        height: 7px;
        opacity: 0.6;
    }

    50% {
        height: 12px;
        opacity: 1;
    }
}

@keyframes tts-pulse {
    0% {
        opacity: 0.7;
    }

    50% {
        opacity: 1;
    }

    100% {
        opacity: 0.7;
    }
}

@keyframes tts-shimmer {
    0% {
        box-shadow: 0 0 0 rgba(255, 213, 79, 0);
        border-color: #ffe082;
    }

    100% {
        box-shadow: 0 0 6px rgba(255, 213, 79, 0.4);
        border-color: #ffca28;
    }
}


/* ==========================================================================
   PART 3: ç»ˆæä¿®å¤ç‰ˆé¢æ¿ (Fix & Chameleon)
   è¯´æ˜ï¼šä¿®å¤äº†èœå•ç‚¹ä¸å¼€çš„é—®é¢˜ï¼Œå¹¶å¼ºåˆ¶èƒŒæ™¯å˜è‰²ï¼
   ========================================================================== */

/* --- æ‚¬æµ®çƒ --- */
#tts-manager-btn {
    position: fixed;
    top: 10px;
    right: 100px;
    z-index: 20000;
    /* ğŸ”¥ ä½¿ç”¨æ’­æ”¾é«˜äº®è‰²,æ›´é†’ç›® */
    background: var(--s-play-bg, #667eea) !important;
    color: var(--s-play-color, #fff) !important;
    border: 2px solid var(--s-play-color, #fff) !important;
    font-family: var(--bubble-font-family, sans-serif);
    padding: 6px 12px;
    border-radius: var(--bubble-radius, 4px);
    cursor: pointer;
    font-size: 13px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    transition: all 0.3s;
}

#tts-manager-btn:hover {
    filter: brightness(1.1);
    transform: translateY(-1px);
}

/* æ¥ç”µéœ‡åŠ¨åŠ¨ç”» */
#tts-manager-btn.incoming-call {
    animation: phone-vibrate 0.5s ease-in-out infinite, phone-glow 1.5s ease-in-out infinite;
}

@keyframes phone-vibrate {

    0%,
    100% {
        transform: translateX(0) rotate(0deg);
    }

    10% {
        transform: translateX(-2px) rotate(-2deg);
    }

    20% {
        transform: translateX(2px) rotate(2deg);
    }

    30% {
        transform: translateX(-2px) rotate(-1deg);
    }

    40% {
        transform: translateX(2px) rotate(1deg);
    }

    50% {
        transform: translateX(-1px) rotate(-2deg);
    }

    60% {
        transform: translateX(1px) rotate(2deg);
    }

    70% {
        transform: translateX(-2px) rotate(-1deg);
    }

    80% {
        transform: translateX(2px) rotate(1deg);
    }

    90% {
        transform: translateX(-1px) rotate(0deg);
    }
}

@keyframes phone-glow {

    0%,
    100% {
        box-shadow: 0 0 10px rgba(102, 126, 234, 0.5), 0 0 20px rgba(102, 126, 234, 0.3);
    }

    50% {
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.8), 0 0 30px rgba(102, 126, 234, 0.5), 0 0 40px rgba(102, 126, 234, 0.3);
    }
}

/* å¯¹è¯è¿½è¸ªé€šçŸ¥åŠ¨ç”» (ç»¿è‰²é—ªçƒ) */
#tts-manager-btn.eavesdrop-available {
    animation: eavesdrop-pulse 1.5s ease-in-out infinite;
}

@keyframes eavesdrop-pulse {

    0%,
    100% {
        box-shadow: 0 0 10px rgba(34, 197, 94, 0.5), 0 0 20px rgba(34, 197, 94, 0.3);
        background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    }

    50% {
        box-shadow: 0 0 20px rgba(34, 197, 94, 0.8), 0 0 30px rgba(34, 197, 94, 0.5), 0 0 40px rgba(34, 197, 94, 0.3);
        background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
    }
}

/* --- é€šçŸ¥æ¡ --- */
#tts-notification-bar {
    position: fixed;
    top: -50px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 20005;
    background: linear-gradient(135deg, #ef5350 0%, #c62828 100%);
    color: white;
    padding: 8px 20px;
    border-radius: 20px;
    box-shadow: 0 4px 15px rgba(198, 40, 40, 0.4);
    font-size: 14px;
    transition: top 0.5s;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
}

#tts-notification-bar.show {
    top: 20px;
}

/* --- ç°ä»£é¢æ¿ (Dashboard) --- */
.tts-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(3px);
    z-index: 20001;
    display: flex;
    align-items: center;
    justify-content: center;
    /* å…è®¸æ•´ä¸ªé®ç½©å±‚æ»šåŠ¨ï¼Œé˜²æ­¢é¢æ¿è¶…å‡ºå±å¹• */
    overflow-y: auto;
    padding: 20px 10px;
    box-sizing: border-box;
}

/* âš ï¸ é‡ç‚¹ä¿®æ”¹ï¼šè¿™é‡Œç”¨äº† ID é€‰æ‹©å™¨ï¼Œä¼˜å…ˆçº§æœ€é«˜ï¼ */
#tts-dashboard {
    /* ğŸ”¥ å¤–å£³èƒŒæ™¯ï¼šä½¿ç”¨ Load èƒŒæ™¯ (é€šå¸¸æ˜¯æ·±è‰²/ä¸»è‰²) */
    background: var(--s-load-bg, #1a1a1a) !important;
    color: var(--s-load-color, #e0e0e0) !important;
    /* è¾¹æ¡†ï¼šä½¿ç”¨æ’­æ”¾è‰²ï¼Œåƒæµå…‰æº¢å½© */
    border: 2px solid var(--s-play-color, #444) !important;
    border-radius: 20px !important;
    box-shadow: 0 10px 50px rgba(0, 0, 0, 0.8) !important;

    font-family: var(--bubble-font-family, sans-serif);
    width: 90%;
    max-width: 450px;
    max-height: 85vh;
    display: flex;
    flex-direction: column;
    position: relative;
}

/* æ ‡é¢˜æ  */
.tts-header {
    /* ğŸ”¥ çŠ¶æ€æ ï¼šåŠé€æ˜èƒŒæ™¯ + æ’­æ”¾è‰²æ–‡å­— */
    background: rgba(0, 0, 0, 0.2) !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    padding: 16px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 20px 20px 0 0;
}

.tts-header h3 {
    font-size: 18px;
    font-weight: 700;
    margin: 0;
    /* ğŸ”¥ æ ‡é¢˜ä½¿ç”¨æ’­æ”¾è‰²é«˜äº® */
    color: var(--s-play-color, #fff) !important;
}

.tts-close {
    color: var(--s-play-color, #fff) !important;
    opacity: 0.9;
    cursor: pointer;
    font-size: 24px;
}

/* å†…å®¹åŒºåŸŸ */
.tts-content {
    background: transparent;
    padding: 20px;
    flex: 1;
    overflow-y: auto;
}

/* --- ğŸŸ¢ å­—ä½“é¢œè‰²å¤§æ”¹é€  --- */

/* æ™®é€šæ­£æ–‡ï¼šä½¿ç”¨åŠ è½½è‰² (ä¿è¯é˜…è¯»èˆ’é€‚) */
.tts-content,
.tts-input-label,
.tts-switch-label {
    color: var(--s-load-color, #ccc) !important;
}

/* æ ‡é¢˜ã€åŠ ç²—ã€é€‰ä¸­é¡¹ï¼šä½¿ç”¨æ’­æ”¾è‰² (é«˜äº®ï¼) */
.tts-content strong,
.tts-content b,
.tts-card-title {
    color: var(--s-play-color, #ff0000) !important;
    opacity: 1 !important;
    font-weight: bold !important;
}

/* å¡ç‰‡ */
.tts-card {
    /* ğŸ”¥ é‡ç‚¹ï¼šä½¿ç”¨ Wait èƒŒæ™¯ (æ°”æ³¡è‰²)ï¼Œè¿™ä¸ªé¢œè‰²å’Œæ–‡å­—å¯¹æ¯”åº¦é€šå¸¸æ˜¯è°ƒæ•™æœ€å¥½çš„ */
    background: linear-gradient(var(--s-wait-bg), var(--s-wait-bg)), #202020 !important;
    /* è¾¹æ¡†ç¨å¾®æ·¡ä¸€ç‚¹ */
    border: 1px solid var(--s-wait-border, #333) !important;
    /* é˜´å½±å»æ‰ï¼Œæ‰å¹³åŒ– */
    box-shadow: none !important;
    border-radius: 12px !important;
    padding: 16px;
    margin-bottom: 10px !important;
}

/* è¾“å…¥æ¡† & æŒ‰é’® */
.tts-modern-input,
.select-trigger {
    /* è¾“å…¥æ¡†ï¼šåŠ æ·±åº•è‰²ï¼Œæ–‡å­—ç”¨æ ‡å‡†è‰² */
    background: rgba(30, 30, 30, 0.8) !important;
    border: 1px solid var(--s-wait-border, #444) !important;
    color: var(--s-load-color, #fff) !important;
    border-radius: var(--bubble-radius, 6px);
}

.btn-primary {
    /* æŒ‰é’®ï¼šèƒŒæ™¯ç”¨æ’­æ”¾è‰²ï¼Œæ–‡å­—åè‰² */
    background: var(--s-play-bg, #2563eb) !important;
    color: var(--s-play-color, #fff) !important;
    border: none !important;
    font-weight: bold !important;
    border-radius: var(--bubble-radius, 6px);
}

/* --- ä¸‹æ‹‰èœå•ä¿®å¤ (å…³é”®åŒºåŸŸ) --- */
.tts-custom-select {
    position: relative;
    width: 100%;
}

.select-trigger {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    cursor: pointer;
    height: 36px;
}

.select-options {
    /* âš ï¸ ä¿®å¤å¤§æ³•ï¼šä¸å†æ‚¬æµ®ï¼Œæ”¹æˆç›´æ¥æ˜¾ç¤ºåœ¨ä¸‹æ–¹ */
    /* è¿™æ ·å°±ä¸ä¼šè¢«ä»»ä½•ä¸œè¥¿é®æŒ¡äº†ï¼ */
    position: relative;
    top: 5px;
    left: 0;
    width: 100%;

    background: var(--s-load-bg, #2b2b2b) !important;
    border: var(--s-ready-border, 1px solid #444) !important;
    color: var(--s-load-color, #eee) !important;

    border-radius: var(--bubble-radius, 8px);
    z-index: 100;

    /* åŠ¨ç”»å¤„ç† */
    display: none;
    /* é»˜è®¤éšè— */
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.2s;
}

/* å½“èœå•æ‰“å¼€æ—¶ */
.tts-custom-select.open .select-options {
    display: block;
    /* æ’‘å¼€å¸ƒå±€ */
    opacity: 1;
    transform: translateY(0);
}

.option-item {
    padding: 10px 12px;
    cursor: pointer;
    border-bottom: 1px solid rgba(128, 128, 128, 0.1);
}

.option-item:hover {
    background: var(--s-play-bg, rgba(255, 255, 255, 0.1));
    color: var(--s-play-color, #fff);
}

/* å¼€å…³æ ·å¼ä¿æŒä¸å˜ï¼Œå¤ªé•¿çœç•¥ï¼ŒåŸæ ·ä¿ç•™å³å¯ï¼Œæˆ–è€…ç›´æ¥ç”¨ä¸‹é¢çš„ç®€å†™ */
.tts-switch-row {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
}

.tts-toggle {
    appearance: none;
    width: 40px;
    height: 22px;
    background: rgba(128, 128, 128, 0.3);
    border-radius: 20px;
    position: relative;
    transition: 0.3s;
}

.tts-toggle::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 18px;
    height: 18px;
    background: #fff;
    border-radius: 50%;
    transition: 0.3s;
}

.tts-toggle:checked {
    background: var(--s-play-bg, #10b981) !important;
}

.tts-toggle:checked::after {
    transform: translateX(18px);
}

/* ==========================================================================
   PART 4: æ™ºèƒ½å˜è‰²èœå• (Chameleon Menu)
   è¯´æ˜ï¼šå®Œå…¨ä½¿ç”¨å½“å‰çš®è‚¤çš„å˜é‡ï¼Œå®ç° 100% é£æ ¼ç»Ÿä¸€
   ========================================================================== */

#tts-bubble-menu {
    position: fixed;
    z-index: 20002;
    /* ä¿è¯åœ¨æ‰€æœ‰å±‚çº§ä¹‹ä¸Š */

    /* ğŸ¨ èƒŒæ™¯ï¼šè·Ÿéš Loading çŠ¶æ€ (é€šå¸¸æ˜¯è¯¥ä¸»é¢˜æœ€ä¸­æ€§çš„é¢œè‰²) */
    background: var(--s-load-bg);
    border: var(--s-load-border);
    color: var(--s-load-color);

    /* ğŸ’ è´¨æ„Ÿï¼šè·Ÿéšä¸»é¢˜å®šä¹‰çš„åœ†è§’å’Œç£¨ç ‚æ„Ÿ */
    backdrop-filter: var(--bubble-backdrop, blur(10px));
    border-radius: var(--bubble-radius);
    font-family: var(--bubble-font-family);
    /* è¿å­—ä½“éƒ½ç»Ÿä¸€ï¼ */

    /* é˜´å½±ï¼šåŠ é‡ä¸€ç‚¹ï¼Œä¿è¯èœå•æµ®èµ·æ¥çš„æ„Ÿè§‰ */
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);

    padding: 8px;
    min-width: 150px;
    font-size: 13px;

    /* è¿›åœºåŠ¨ç”» */
    animation: tts-menu-pop 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform-origin: top left;
}

/* åˆ—è¡¨é¡¹ - é»˜è®¤çŠ¶æ€ */
#tts-bubble-menu .menu-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    margin-bottom: 4px;
    cursor: pointer;
    transition: all 0.2s;
    border-radius: calc(var(--bubble-radius) - 4px);
    /* è®©å†…éƒ¨åœ†è§’ç¨å¾®å°ä¸€ç‚¹ç‚¹ï¼Œåè°ƒ */

    /* ğŸ¨ é»˜è®¤æ ·å­ï¼šè·Ÿéš Ready (å°±ç»ª) çŠ¶æ€ */
    /* è¿™æ ·èœå•é‡Œçš„é€‰é¡¹çœ‹èµ·æ¥å°±åƒæ˜¯ä¸€ä¸ªä¸ªå‡†å¤‡å¥½çš„æ°”æ³¡ */
    background: var(--s-ready-bg);
    color: var(--s-ready-color);
    border: var(--s-ready-border);
    /* Ready çŠ¶æ€å¯èƒ½æœ‰é˜´å½±ï¼Œè¿™é‡Œä¸ºäº†èœå•æ•´æ´ï¼Œå»ºè®®å»æ‰å†…éƒ¨é˜´å½±ï¼Œæˆ–è€…ä½ å¯ä»¥ä¿ç•™ */
    box-shadow: none;
}

/* åˆ—è¡¨é¡¹ - é¼ æ ‡æ‚¬åœ */
#tts-bubble-menu .menu-item:hover {
    /* ğŸ¨ æ‚¬åœæ ·å­ï¼šè·Ÿéš Playing (æ’­æ”¾/é«˜äº®) çŠ¶æ€ */
    background: var(--s-play-bg);
    color: var(--s-play-color);
    border: var(--s-play-border);

    /* è¿™é‡Œæˆ‘ä»¬è¦é‚£ä¸ªé…·ç‚«çš„é˜´å½±ï¼ */
    box-shadow: var(--s-play-shadow);

    /* ç¨å¾®æ”¾å¤§ä¸€ç‚¹ç‚¹ï¼Œåƒæ°”æ³¡è¢«æŒ‰ä¸‹å» */
    transform: scale(1.02);
    font-weight: var(--s-play-font-weight, 600);
}

/* åˆ—è¡¨é¡¹ä¸­çš„å›¾æ ‡ */
#tts-bubble-menu .menu-item .icon {
    font-size: 16px;
    opacity: 0.8;
}

#tts-bubble-menu .menu-item:hover .icon {
    opacity: 1;
    /* æ‚¬åœæ—¶å›¾æ ‡æ›´äº® */
}

/* åˆ†å‰²çº¿ï¼šç”¨è¾¹æ¡†é¢œè‰²åšåˆ†å‰²ï¼Œä¿æŒä½è°ƒ */
#tts-bubble-menu .divider {
    height: 1px;
    background: currentColor;
    /* ä½¿ç”¨å½“å‰æ–‡å­—é¢œè‰² */
    opacity: 0.2;
    margin: 6px 4px;
}

/* è¿›åœºåŠ¨ç”»å…³é”®å¸§ */
@keyframes tts-menu-pop {
    from {
        opacity: 0;
        transform: scale(0.8) translateY(-10px);
    }

    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* ==========================================================================
   PART 5: ä¸‹æ‹‰èœå•é£æ ¼é¢„è§ˆ (Style Preview in Menu)
   è¯´æ˜ï¼šè®©é€‰é¡¹åˆ—è¡¨é‡Œçš„æ¯ä¸€é¡¹éƒ½æ˜¾ç¤ºå‡ºè¯¥é£æ ¼ç‹¬ç‰¹çš„é…è‰²å’Œå­—ä½“ï¼
   ========================================================================== */

/* 1. åŸºç¡€ä¿®æ­£ï¼šè®©é€‰é¡¹ç¨å¾®é«˜ä¸€ç‚¹ï¼Œæ–¹ä¾¿é¢„è§ˆå­—ä½“ */
.option-item {
    transition: all 0.2s;
    border-left: 3px solid transparent;
    /*ä»¥æ­¤æ¥åšé€‰ä¸­æŒ‡ç¤º*/
}

/* --- ğŸŒ¿ Default æ£®é‡ --- */
.option-item[data-value="default"] {
    background: #f1f8e9 !important;
    color: #33691e !important;
    font-family: sans-serif;
}

.option-item[data-value="default"]:hover {
    background: #dcedc8 !important;
}

/* --- ğŸ“¼ Classic æ€€æ—§ --- */
.option-item[data-value="classic"] {
    background: #c6e2b8 !important;
    color: #333 !important;
    font-family: "Courier New", monospace;
    /* å¤å¤å­—ä½“ */
}

.option-item[data-value="classic"]:hover {
    background: #aed581 !important;
}

/* --- ğŸ’ Kawaii å¹»å½© --- */
.option-item[data-value="kawaii"] {
    background: linear-gradient(90deg, #f3e5f5 0%, #e1f5fe 100%) !important;
    color: #880e4f !important;
    font-family: "Segoe UI", sans-serif;
}

.option-item[data-value="kawaii"]:hover {
    background: linear-gradient(90deg, #e1bee7 0%, #b3e5fc 100%) !important;
    font-weight: bold;
}

/* --- ğŸŒ¸ Bloom èŠ±ä¿¡ --- */
.option-item[data-value="bloom"] {
    background: #fff0f5 !important;
    color: #d81b60 !important;
    font-family: "Nunito", sans-serif;
}

.option-item[data-value="bloom"]:hover {
    background: #fce4ec !important;
    border-left-color: #ec407a;
}

/* --- ğŸ–¤ Obsidian é»‘æ›œçŸ³ --- */
.option-item[data-value="obsidian"] {
    background: #1e1e1e !important;
    color: #4ade80 !important;
    /* é»‘åº•ç»¿å­— */
    font-family: sans-serif;
    border-bottom: 1px solid #333;
}

.option-item[data-value="obsidian"]:hover {
    background: #000 !important;
    box-shadow: inset 0 0 10px rgba(74, 222, 128, 0.2);
}

/* --- âš¡ Cyberpunk èµ›åš --- */
.option-item[data-value="cyberpunk"] {
    background: #050505 !important;
    color: #00ffff !important;
    font-family: "Consolas", monospace;
    /* ä»£ç å­—ä½“ */
    text-shadow: 0 0 2px rgba(0, 255, 255, 0.5);
}

.option-item[data-value="cyberpunk"]:hover {
    background: #001a1a !important;
    border-left-color: #00ffff;
}

/* --- âœ’ï¸ Ink æ°´å¢¨ --- */
.option-item[data-value="ink"] {
    background: #fdfbf7 !important;
    color: #2c3e50 !important;
    font-family: "Kaiti", "STKaiti", serif;
    /* æ¥·ä½“ */
}

.option-item[data-value="ink"]:hover {
    background: #eceff1 !important;
    border-left-color: #c0392b;
    /* æœ±ç ‚çº¢ */
}

/* --- ğŸ“œ Scroll ç¾Šçš®å· --- */
.option-item[data-value="scroll"] {
    background: #fdf5e6 !important;
    color: #5d4037 !important;
    font-family: "Georgia", serif;
    /* è¡¬çº¿ä½“ */
}

.option-item[data-value="scroll"]:hover {
    background: #ffe0b2 !important;
    border-left-color: #8d6e63;
}

/* --- âš™ï¸ Steampunk è’¸æ±½ --- */
.option-item[data-value="steampunk"] {
    background: #d7ccc8 !important;
    color: #3e2723 !important;
    font-family: "Courier New", monospace;
    border: 1px dashed #8d6e63;
    /* é“†æ¥æ„Ÿ */
}

.option-item[data-value="steampunk"]:hover {
    background: #ffca28 !important;
    color: #000 !important;
}

/* --- ğŸ’‹ Rouge é­…å½± --- */
.option-item[data-value="rouge"] {
    background: #2a1a1a !important;
    color: #ffcdd2 !important;
    font-family: serif;
}

.option-item[data-value="rouge"]:hover {
    background: linear-gradient(90deg, #4a0000 0%, #880e4f 100%) !important;
    color: #fff !important;
}

/* --- ğŸ”« Tactical æˆ˜æœ¯ --- */
.option-item[data-value="tactical"] {
    background: #000 !important;
    color: #00e676 !important;
    font-family: monospace;
    letter-spacing: 1px;
}

.option-item[data-value="tactical"]:hover {
    background: #1b5e20 !important;
    border-left-color: #00e676;
}

/* --- ğŸ›¸ Holo æ˜Ÿèˆ° --- */
.option-item[data-value="holo"] {
    background: #e1f5fe !important;
    color: #0277bd !important;
    font-family: sans-serif;
}

.option-item[data-value="holo"]:hover {
    background: #fff !important;
    box-shadow: 0 0 10px rgba(3, 169, 244, 0.4);
}

/* ==========================================================================
   PART 6: çœŸå®ç§»åŠ¨ç«¯é€‚é… (Real Mobile Device)
   è¯´æ˜ï¼šé’ˆå¯¹æ‰‹æœºæµè§ˆå™¨è®¿é—®çš„åœºæ™¯è¿›è¡Œä¼˜åŒ–
   ========================================================================== */

@media screen and (max-width: 768px) {

    /* é®ç½©å±‚ï¼šå…¨å±è¦†ç›– */
    #tts-dashboard-overlay.tts-overlay,
    .tts-overlay {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100vw !important;
        height: 100vh !important;
        z-index: 2147483646 !important;
        display: block !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        padding: 10px !important;
        box-sizing: border-box !important;
    }

    /* Dashboard é¢æ¿ï¼šä¸ä½¿ç”¨ flexï¼Œç›´æ¥è®¾ç½®å›ºå®šå°ºå¯¸ */
    #tts-dashboard-overlay #tts-dashboard,
    .tts-overlay #tts-dashboard,
    #tts-dashboard {
        position: relative !important;
        width: calc(100vw - 20px) !important;
        max-width: calc(100vw - 20px) !important;
        min-height: 80vh !important;
        height: auto !important;
        max-height: none !important;
        margin: 0 auto !important;
        display: block !important;
    }

    /* æ ‡é¢˜æ  */
    #tts-dashboard-overlay #tts-dashboard .tts-header,
    .tts-overlay #tts-dashboard .tts-header,
    #tts-dashboard .tts-header {
        display: flex !important;
        height: auto !important;
        min-height: 50px !important;
    }

    /* å†…å®¹åŒºåŸŸï¼šç¡®ä¿æ˜¾ç¤º */
    #tts-dashboard-overlay #tts-dashboard .tts-content,
    .tts-overlay #tts-dashboard .tts-content,
    #tts-dashboard .tts-content {
        display: block !important;
        height: auto !important;
        min-height: 50vh !important;
        max-height: none !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }
}